<div ng-app="GVA.Creation" ng-controller="ManagePageController">
    <div class="manage-section warn-box text-centered" ng-hide="visited || account">
        <strong>You are not currently signed in.<br /></strong>
        You should bookmark this page to avoid losing your poll.
    </div>
    <div class="manage-area centered">

        <h2>
            Poll Management
        </h2>
        <div class="manage-section">
            <div>
                <span class="glyphicon glyphicon-question-sign pull-left" aria-hidden="true"></span>
                <h4 class="icon-padded-left">Question:</h4>
            </div>
            <div>
                <form ng-submit="toggleNameEdit=false;updatePoll()">
                    <span class="icon-padded-left">
                        <span ng-if="!toggleNameEdit">
                            {{poll.Name}}
                            <span class="pull-right"><a class="clickable" ng-click="$parent.toggleNameEdit=true">Edit</a></span>
                        </span>
                        <span ng-if="toggleNameEdit">
                            <input class="manage-name-input" ng-model="poll.Name" required />
                            <span class="glyphicon glyphicon-remove pull-right clickable form-aligned-top" ng-click="$parent.toggleNameEdit=false;$parent.discardNameChanges()"></span>
                            <span class="glyphicon glyphicon-ok pull-right clickable form-aligned-top" ng-click="$parent.toggleNameEdit=false;$parent.updatePoll()"></span>
                        </span>
                    </span>
                </form>
            </div>
        </div>
        <div class="manage-section">
            <div>
                <span class="glyphicon glyphicon-th-list pull-left" aria-hidden="true"></span>
                <h4 class="icon-padded-left">Options:</h4>
            </div>
            <div>
                <span class="icon-padded-left">{{poll.Options.length}} Options</span>
                <span class="pull-right"><a href="{{manageSubPageUrl('Options')}}">Edit</a></span>
            </div>
        </div>
        <div class="manage-section">
            <div>
                <span class="glyphicon glyphicon-user pull-left" aria-hidden="true"></span>
                <h4 class="icon-padded-left">Invitees:</h4>
            </div>
            <div>
                <span class="icon-padded-left">{{poll.Voters.length}} Invitees</span>
                <span class="pull-right"><a href="{{manageSubPageUrl('Invitees')}}">Edit</a></span>
            </div>
        </div>
        <div class="manage-section">
            <div>
                <span class="glyphicon glyphicon-envelope pull-left" aria-hidden="true"></span>
                <h4 class="icon-padded-left">Invitation style:</h4>
            </div>
            <div>
                <span class="icon-padded-left" ng-if="poll.InviteOnly">Invite Only, </span>
                <span class="icon-padded-left" ng-if="!poll.InviteOnly">Open Voting, </span>
                <span ng-if="poll.NamedVoting">Named Voters</span>
                <span ng-if="!poll.NamedVoting">Anonymous Voters</span>
                <span class="pull-right"><a href="{{manageSubPageUrl('InvitationStyle')}}">Edit</a></span>
            </div>
        </div>
        <div class="manage-section">
            <div>
                <span class="glyphicon glyphicon-check pull-left" aria-hidden="true"></span>
                <h4 class="icon-padded-left">Poll Style:</h4>
            </div>
            <div>
                <span class="icon-padded-left">{{poll.VotingStrategy}}</span>
                <span class="pull-right"><a href="{{manageSubPageUrl('PollType')}}">Edit</a></span>
            </div>
        </div>
        <div class="manage-section">
            <div>
                <span class="glyphicon glyphicon-time pull-left" aria-hidden="true"></span>
                <h4 class="icon-padded-left">Expires:</h4>
            </div>
            <div>
                <span>
                    <span class="icon-padded-left">{{formatPollExpiry()}}</span>
                    <span class="pull-right"><a href="{{manageSubPageUrl('Expiry')}}">Edit</a></span>
                </span>
            </div>
        </div>
        <div class="manage-section">
            <div>
                <span class="glyphicon glyphicon-tasks pull-left" aria-hidden="true"></span>
                <h4 class="icon-padded-left">Voters:</h4>
            </div>
            <div>
                <span class="icon-padded-left">{{ poll.Voters.length }} Voters</span>
                <span class="pull-right"><a href="{{ manageSubPageUrl('Voters') }}">Edit</a></span>
            </div>
        </div>
        <div class="manage-section flexbox">
            <div class="centered">
                <a href="{{pollUrl()}}">
                    <button class="active-btn btn-large">Go to poll</button>
                </a>
            </div>
        </div>
    </div>
</div>