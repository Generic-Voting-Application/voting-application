<meta name="google-signin-clientid" content="411410182235-0p8378ip8snlvbut4grq5ar61r8p60c2.apps.googleusercontent.com" />
<meta name="google-signin-scope" content="profile" />
<meta name="google-signin-cookiepolicy" content="single_host_origin" />

<div class="row">
    <div class="col-md-8 centered">
        <div class="page-header">
            <h1>
                <span data-bind="text: $root.pollName"></span>
                <small>by <span data-bind="text: $root.pollCreator"></span></small>
            </h1>
        </div>
        <div class="accordion" id="accordion">
            <!--Login Section-->
            <div id="loginSection" class="accordion-group panel panel-default">
                <div class="accordion-heading panel-heading clickable" data-bind="click: $root.showSection.bind($data, $element)">
                    <h4>Login</h4><span data-bind="text: '(Logged in as: '+userName()+')', visible: userName() "></span>
                </div>
                <div class="accordion-body panel-body collapse row">
                    <div class="col-xs-1"></div>

                    <div class="col-sm-4 centered form-group">
                        <h4>Vote anonymously...</h4>
                        <form>
                            <label for="loginUsername" class="control-label">Name</label>
                            <input id="loginUsername" class="form-control" autofocus placeholder="E.g. Your Name" />
                            <label class="control-label info-message" id="usernameWarnMessage" hidden> Username must be alpha-numeric</label>
                            <button id="Name-loginSubmit" class="btn btn-primary" data-bind="click: $root.submitLogin">Submit</button>
                        </form>
                    </div>
                    <div class="col-sm-1 divider"></div>
                    <div class="col-sm-1"></div>
                    <div class="col-sm-4 centered form-group">
                        <h4>...or sign in</h4>
                        <br />
                        <button id="signinGoogleButton" class="signinButton"><img src="/img/sign-in-with-google.png" /></button>
                        <button id="signinFacebookButton" class="signinButton"><img src="/img/sign-in-with-facebook.png" /></button>
                    </div>
                    <div class="col-xs-1"></div>
                </div>
            </div>
            <!--Voting Section-->
            <div id="voteSection" class="accordion-group panel panel-default" data-bind="css: { 'panel-warning' : pollExpired }">
                <div class="accordion-heading panel-heading clickable" data-bind="click: function() { if(!$root.pollExpires()) {$root.showSection($element)} }">
                    <h4>Vote</h4><span data-bind="text: pollExpired() ? 'Poll closed' : ('Poll closes in ' + pollExpiryOffset()), visible: pollExpires()"></span>
                </div>
                <div class="accordion-body panel-body collapse row">
                    <div class="col-md-1"></div>
                    <div class="col-md-10 centered">
                        <div id="votingArea"></div>
                        <div id="add-option" data-bind="visible: optionAdding">
                            <h3>Add an option</h3>
                            <table class="table table-hover">
                                <thead>
                                    <tr>
                                        <th>Name</th>
                                        <th>Description</th>
                                        <th class="hidden-xs hidden-sm">More info</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr id="newOptionRow">
                                        <td>
                                            <input class="form-control input-block" id="newName" placeholder="Name" />
                                        </td>
                                        <td>
                                            <input class="form-control input-block" id="newDescription" placeholder="Description" />
                                        </td>
                                        <td class="hidden-xs hidden-sm">
                                            <input class="form-control input-block" id="newInfo" placeholder="More Info" />
                                        </td>
                                        <td>
                                            <button type="submit" class="btn btn-primary" data-bind="click: $root.addOption.bind()">Add</button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <div class="col-md-1"></div>
                </div>
            </div>
            <!--Results Section-->
            <div id="resultSection" class="accordion-group panel panel-default">
                <div class="accordion-heading panel-heading clickable" data-bind="click: $root.showSection.bind($data, $element)">
                    <h4>Results</h4>
                </div>
                <div class="accordion-body panel-body collapse row">
                    <div class="col-md-1"></div>
                    <div class="col-md-10 centered">
                        <div id="results"></div>
                    </div>
                    <div class="col-md-1"></div>
                </div>
            </div>
        </div>
    </div>
    <div class="col-md-4">
        <div class="panel panel-default" id="chat-panel">
            <div class="panel-heading"><span class="panel-title">Chat</span></div>
            <div style="height:300px; overflow-y:auto" id="chat-messages" class="panel-body" data-bind="foreach: {data: chatMessages, as: 'message'}">
                <div data-bind="text: message.User.Name + ': ' + message.Message"></div>
            </div>
            <div class="panel-footer">
                <form>
                    <div class="input-append form-group">
                        <input class="form-control" type='text' id="chatTextInput" placeholder="Message" />
                        <button class="btn btn-primary" data-bind="click: $root.sendChatMessage">Send</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
